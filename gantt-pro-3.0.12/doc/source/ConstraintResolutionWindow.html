<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js"><span id='Gnt-widget-ConstraintResolutionWindow'>/**
</span> * @class   Gnt.widget.ConstraintResolutionWindow
 * @extends Ext.window.Window
 */
Ext.define(&quot;Gnt.widget.ConstraintResolutionWindow&quot;, {
    extend   : &quot;Ext.window.Window&quot;,
    alias    : &quot;widget.constraintresolutionwindow&quot;,
    requires : [&quot;Gnt.widget.ConstraintResolutionForm&quot;],
    mixins   : [&quot;Gnt.mixin.Localizable&quot;],

<span id='Gnt-widget-ConstraintResolutionWindow-property-modal'>    modal       : true,
</span><span id='Gnt-widget-ConstraintResolutionWindow-property-closable'>    closable    : true,
</span><span id='Gnt-widget-ConstraintResolutionWindow-property-resizable'>    resizable   : true,
</span><span id='Gnt-widget-ConstraintResolutionWindow-property-collapsible'>    collapsible : false,
</span><span id='Gnt-widget-ConstraintResolutionWindow-property-border'>    border      : false,
</span><span id='Gnt-widget-ConstraintResolutionWindow-property-bodyBorder'>    bodyBorder  : false,
</span>
<span id='Gnt-widget-ConstraintResolutionWindow-cfg-l10n'>    /**
</span>     * @cfg {Object} l10n Object containing localication strings
     * An object, purposed for the class localization. Contains the following keys/values:

            - &quot;Constraint violation&quot; : &quot;Constraint violation&quot;
     */

    config : {
<span id='Gnt-widget-ConstraintResolutionWindow-cfg-resolutionContext'>        /**
</span>         * @cfg {Object} resolutionContext Object containing a set of possible resolutions provided by {@link Gnt.constraint.Base#getResolution()}.
         */
        resolutionContext : null,
<span id='Gnt-widget-ConstraintResolutionWindow-cfg-dateFormat'>        /**
</span>         * @cfg {String} dateFormat
         *
         * Date format to pass to {@link Gnt.widget.ConstraintResolutionForm}
         */
        dateFormat : null
    },

<span id='Gnt-widget-ConstraintResolutionWindow-property-form'>    form : null,
</span>
<span id='Gnt-widget-ConstraintResolutionWindow-method-constructor'>    constructor : function(config) {
</span>        var me = this;

        if (Ext.Version.compare(Ext.versions.extjs, '5.0.0') == -1) {
            me.initConfig(config);
        }

        me.callParent([config]);
    },

<span id='Gnt-widget-ConstraintResolutionWindow-method-initComponent'>    initComponent : function() {
</span>        var me = this;

        me.title = me.L(&quot;Constraint violation&quot;);
        me.setupItems();

        me.height = Math.round(Ext.dom.Element.getViewportHeight() / 3);
        me.width  = Math.round(Ext.dom.Element.getViewportWidth() / 4);

        me.callParent(arguments);

        me.on('afterlayout', me.onAfterOptimalLayout, me, {single : true });
    },

<span id='Gnt-widget-ConstraintResolutionWindow-method-setupItems'>    setupItems : function() {
</span>        var me = this;

        me.layout = 'fit';

        me.form = new Gnt.widget.ConstraintResolutionForm({
            margin              : '0 0 3 0',
            resolutionContext   : me.getResolutionContext(),
            dateFormat          : me.getDateFormat(),
            bubbleEvents        : ['ok', 'cancel']
        });

        me.items = me.form;
    },

<span id='Gnt-widget-ConstraintResolutionWindow-method-onAfterOptimalLayout'>    onAfterOptimalLayout : function() {
</span>        var me = this,
            originalHeight,
            originalFormHeight,
            formOptimalHeight,
            optimalHeight;

        originalHeight     = me.getHeight();
        originalFormHeight = me.form.getHeight();
        formOptimalHeight  = me.form.getOptimalHeight();
        optimalHeight      = formOptimalHeight + originalHeight - originalFormHeight;

        originalHeight != optimalHeight &amp;&amp; me.setHeight(optimalHeight);
    }
});
</pre>
</body>
</html>
