<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js"><span id='Gnt-data-AssignmentStore'>/**
</span> * @class Gnt.data.AssignmentStore
 * @extends Schdata.AssignmentStore
 *
 * A class representing a collection of assignments between tasks in the {@link Gnt.data.TaskStore} and resources
 * in the {@link Gnt.data.ResourceStore}.
 *
 * Contains a collection of {@link Gnt.model.Assignment} records.
 */
Ext.define('Gnt.data.AssignmentStore', {
    extend                : 'Sch.data.AssignmentStore',

    requires              : [
        'Gnt.model.Assignment'
    ],

<span id='Gnt-data-AssignmentStore-property-model'>    model                 : 'Gnt.model.Assignment',
</span>    alias                 : 'store.gantt_assignmentstore',

<span id='Gnt-data-AssignmentStore-property-storeId'>    storeId               : 'assignments',
</span><span id='Gnt-data-AssignmentStore-property-proxy'>    proxy                 : 'memory',
</span>
<span id='Gnt-data-AssignmentStore-method-attachToEventStore'>    // Overriden from Sch.data.AssignmentStore due to the logic required is handled by the Gantt codebase
</span>    attachToEventStore    : Ext.emptyFn,
<span id='Gnt-data-AssignmentStore-method-attachToResourceStore'>    attachToResourceStore : Ext.emptyFn,
</span>
<span id='Gnt-data-AssignmentStore-method-getTaskStore'>    /**
</span>     * Returns the associated task store instance.
     *
     * @return {Gnt.data.TaskStore}
     */
    getTaskStore : function () {
        return this.getEventStore();
    },

<span id='Gnt-data-AssignmentStore-method-setTaskStore'>    /**
</span>     * Sets associated task store instance
     *
     * @parem {Gnt.data.TaskStore} store
     */
    setTaskStore : function (store) {
        return this.setEventStore(store);
    },


<span id='Gnt-data-AssignmentStore-method-mapAssignmentsForTask'>    /**
</span>     * Maps over task assignments.
     *
     * @param {Gnt.model.Task/Mixed} task
     * @param {Function} [fn=Ext.identityFn]
     * @param {Function} [filterFn=Ext.returnTrue]
     * @return {Mixed[]}
     */
    mapAssignmentsForTask : function (task, fn, filterFn) {
        return this.mapAssignmentsForEvent(task, fn, filterFn);
    },

<span id='Gnt-data-AssignmentStore-method-getAssignmentsForTask'>    /**
</span>     * Returns all assignments for a given task.
     *
     * @param {Gnt.model.Task/Mixed} task
     * @return {Gnt.model.Assignment[]}
     */
    getAssignmentsForTask : function(task) {
        return this.getAssignmentsForEvent(task);
    },

<span id='Gnt-data-AssignmentStore-method-removeAssignmentsForTask'>    /**
</span>     * Removes all assignments for given event
     *
     * @param {Gnt.model.Task/Mixed} task
     */
    removeAssignmentsForTask : function(task) {
        return this.removeAssignmentsForEvent(task);
    },

<span id='Gnt-data-AssignmentStore-method-getResourcesForTask'>    /**
</span>     * Returns all resources assigned to a task.
     *
     * @param {Gnt.model.Task/Mixed} task
     * @return {Gnt.model.Resource[]}
     */
    getResourcesForTask : function (task) {
        return this.getResourcesForEvent(task);
    },

<span id='Gnt-data-AssignmentStore-method-getTasksForResource'>    /**
</span>     * Returns all tasks assigned to a resource
     *
     * @param {Gnt.model.Resource/Mixed} resource
     * @return {Gnt.model.Task[]}
     */
    getTasksForResource : function (resource) {
        return this.getEventsForResource(resource);
    },

<span id='Gnt-data-AssignmentStore-method-assignTaskToResource'>    /**
</span>     * Creates and adds assignment record for a given task and a resource.
     *
     * @param {Gnt.model.Task/Mixed} task
     * @param {Gnt.model.Resource/Mixed} resource
     * @return {Gnt.model.Assignment}
     */
    assignTaskToResource : function(task, resource, units) {
        return this.assignEventToResource(task, resource, function(assignment) {
            assignment.setUnits(units);
            return assignment;
        });
    },

<span id='Gnt-data-AssignmentStore-method-unassignTaskFromResource'>    /**
</span>     * Removes assignment record for a given task and a resource.
     *
     * @param {Gnt.model.Task/Mixed} task
     * @param {Gnt.model.Resource/Mixed} resource
     * @return {Gnt.model.Assignment}
     */
    unassignTaskFromResource : function (task, resource) {
        return this.unassignEventFromResource(task, resource);
    },

<span id='Gnt-data-AssignmentStore-method-isTaskAssignedToResource'>    /**
</span>     * Checks whether a task is assigned to a resource.
     *
     * @param {Gnt.model.Task/Mixed} evnt
     * @param {Gnt.model.Resource/Mixed} resource
     * @param {Function} [fn] Function which will resieve assignment record if one present
     * @return {Boolean}
     */
    isTaskAssignedToResource : function (task, resource, fn) {
        return this.isEventAssignedToResource(task, resource, fn);
    },

<span id='Gnt-data-AssignmentStore-method-getAssignmentForTaskAndResource'>    /**
</span>     * Returns assignment record for given task and resource
     *
     * @param {Gnt.model.Task} event
     * @param {Gnt.model.Resource} resource
     * @return {Gnt.model.Assignment}
     */
    getAssignmentForTaskAndResource : function (task, resource) {
        return this.getAssignmentForEventAndResource(task, resource);
    }
});
</pre>
</body>
</html>
